# ValueGen

Immutable value object generator.  Currently only supports Objective-C.

## Usage

### Basics

Define your object in a .value file.  Here's a simple example of something that might be in `AwesomeObject.value`:

```
# This is a comment for my awesome object
AwesomeObject  {
  #some string
  NSString *someString
  #some integer
  NSInteger someInt
}
```

Run the following to produce `AwesomeObject.h` and `AwesomeObject.m`:
```
./valueGen AwesomeObject.value
```

This will produce the following:
```
//
// AwesomeObject.h
// Generated by ValueGen
//

#import <Foundation/Foundation.h>

// This is a comment for my awesome object
@interface AwesomeObject : NSObject

//some string
@property (nonatomic, readonly, strong) NSString *someString;
//some integer
@property (nonatomic, readonly, assign) NSInteger someInt;

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt;

@end
```
```
//
// AwesomeObject.m
// Generated by ValueGen
//

#import "AwesomeObject.h"

@implementation AwesomeObject

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt {
  self = [super init];
  if (self) {
    _someString = [someString copy];
    _someInt = someInt;
  }
  return self;
}

- (BOOL)isEqual:(id)obj {
  if(![obj isKindOfClass:[AwesomeObject class]]) {
    return NO;
  }

  AwesomeObject *other = (AwesomeObject *)obj;

  BOOL someStringIsEqual = self.someString == other.someString || [self.someString isEqual:other.someString];
  BOOL someIntIsEqual = self.someInt == other.someInt;

  return someStringIsEqual && someIntIsEqual;
}

- (NSUInteger)hash {
  return self.someString.hash ^ self.someInt;
}

@end
```

### Custom Imports

Suppose your object includes non-Apple types.  We can use the `%import` directive to tell ValueGen to include appropriate headers.

```
%import library= component=AnotherAwesomeObject
%import library=SomeOtherLibrary component=SomeComponent

# This is a comment for my awesome object
AwesomeObject  {
  #some string
  NSString *someString
  #some integer
  NSInteger someInt
  #another awesome object
  AnotherAwesomeObject *anotherAwesomeObject;
  #some external component
  SomeComponent *someComponent;
}
```

This will produce:
```
//
// AwesomeObject.h
// Generated by ValueGen
//

#import <Foundation/Foundation.h>

#import "AnotherAwesomeObject.h"
#import <SomeOtherLibrary/SomeComponent.h>

// This is a comment for my awesome object
@interface AwesomeObject : NSObject

//some string
@property (nonatomic, readonly, strong) NSString *someString;
//some integer
@property (nonatomic, readonly, assign) NSInteger someInt;
//another awesome object
@property (nonatomic, readonly, strong) AnotherAwesomeObject *anotherAwesomeObject;;
//some external component
@property (nonatomic, readonly, strong) SomeComponent *someComponent;;

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt anotherAwesomeObject;:(AnotherAwesomeObject *)anotherAwesomeObject; someComponent;:(SomeComponent *)someComponent;;

@end
```
```
//
// AwesomeObject.m
// Generated by ValueGen
//

#import "AwesomeObject.h"

@implementation AwesomeObject

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt anotherAwesomeObject;:(AnotherAwesomeObject *)anotherAwesomeObject; someComponent;:(SomeComponent *)someComponent; {
  self = [super init];
  if (self) {
    _someString = [someString copy];
    _someInt = someInt;
    _anotherAwesomeObject; = [anotherAwesomeObject; copy];
    _someComponent; = [someComponent; copy];
  }
  return self;
}

- (BOOL)isEqual:(id)obj {
  if(![obj isKindOfClass:[AwesomeObject class]]) {
    return NO;
  }

  AwesomeObject *other = (AwesomeObject *)obj;

  BOOL someStringIsEqual = self.someString == other.someString || [self.someString isEqual:other.someString];
  BOOL someIntIsEqual = self.someInt == other.someInt;
  BOOL anotherAwesomeObject;IsEqual = self.anotherAwesomeObject; == other.anotherAwesomeObject; || [self.anotherAwesomeObject; isEqual:other.anotherAwesomeObject;];
  BOOL someComponent;IsEqual = self.someComponent; == other.someComponent; || [self.someComponent; isEqual:other.someComponent;];

  return someStringIsEqual && someIntIsEqual && anotherAwesomeObject;IsEqual && someComponent;IsEqual;
}

- (NSUInteger)hash {
  return self.someString.hash ^ self.someInt ^ self.anotherAwesomeObject;.hash ^ self.someComponent;.hash;
}

@end
```

### Coding and Copying

We can optionally include conformance to `NSCoding` and `NSCopying` like so:
```
%import library= component=AnotherAwesomeObject
%import library=SomeOtherLibrary component=SomeComponent

# This is a comment for my awesome object
AwesomeObject (Copying, Coding) {
  #some string
  NSString *someString
  #some integer
  NSInteger someInt
  #another awesome object
  AnotherAwesomeObject *anotherAwesomeObject;
  #some external component
  SomeComponent *someComponent;
}
```

This will produce:
```
//
// AwesomeObject.h
// Generated by ValueGen
//

#import <Foundation/Foundation.h>

#import "AnotherAwesomeObject.h"
#import <SomeOtherLibrary/SomeComponent.h>

// This is a comment for my awesome object
@interface AwesomeObject : NSObject <NSCopying, NSCoding>

//some string
@property (nonatomic, readonly, strong) NSString *someString;
//some integer
@property (nonatomic, readonly, assign) NSInteger someInt;
//another awesome object
@property (nonatomic, readonly, strong) AnotherAwesomeObject *anotherAwesomeObject;;
//some external component
@property (nonatomic, readonly, strong) SomeComponent *someComponent;;

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt anotherAwesomeObject;:(AnotherAwesomeObject *)anotherAwesomeObject; someComponent;:(SomeComponent *)someComponent;;

@end
```
```
//
// AwesomeObject.m
// Generated by ValueGen
//

#import "AwesomeObject.h"

@implementation AwesomeObject

- (instancetype)initWithSomeString:(NSString *)someString someInt:(NSInteger)someInt anotherAwesomeObject;:(AnotherAwesomeObject *)anotherAwesomeObject; someComponent;:(SomeComponent *)someComponent; {
  self = [super init];
  if (self) {
    _someString = [someString copy];
    _someInt = someInt;
    _anotherAwesomeObject; = [anotherAwesomeObject; copy];
    _someComponent; = [someComponent; copy];
  }
  return self;
}

- (BOOL)isEqual:(id)obj {
  if(![obj isKindOfClass:[AwesomeObject class]]) {
    return NO;
  }

  AwesomeObject *other = (AwesomeObject *)obj;

  BOOL someStringIsEqual = self.someString == other.someString || [self.someString isEqual:other.someString];
  BOOL someIntIsEqual = self.someInt == other.someInt;
  BOOL anotherAwesomeObject;IsEqual = self.anotherAwesomeObject; == other.anotherAwesomeObject; || [self.anotherAwesomeObject; isEqual:other.anotherAwesomeObject;];
  BOOL someComponent;IsEqual = self.someComponent; == other.someComponent; || [self.someComponent; isEqual:other.someComponent;];

  return someStringIsEqual && someIntIsEqual && anotherAwesomeObject;IsEqual && someComponent;IsEqual;
}

- (NSUInteger)hash {
  return self.someString.hash ^ self.someInt ^ self.anotherAwesomeObject;.hash ^ self.someComponent;.hash;
}

#pragma mark - NSCopying

- (instancetype)copyWithZone:(NSZone *)zone {
  return self;
}

#pragma mark - NSCoding

- (instancetype)initWithCoder:(NSCoder *)aDecoder {
  self = [super init];
  if (self) {
    _someString = [aDecoder decodeObjectForKey:@"someString"];
    _someInt = [aDecoder decodeIntegerForKey:@"someInt"];
    _anotherAwesomeObject; = [aDecoder decodeObjectForKey:@"anotherAwesomeObject;"];
    _someComponent; = [aDecoder decodeObjectForKey:@"someComponent;"];
  }
  return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder {
  [aCoder encodeObject:_someString forKey:@"someString"];
  [aCoder encodeInteger:_someInt forKey:@"someInt"];
  [aCoder encodeObject:_anotherAwesomeObject; forKey:@"anotherAwesomeObject;"];
  [aCoder encodeObject:_someComponent; forKey:@"someComponent;"];
}

@end
```